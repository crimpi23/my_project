{% extends "base/public_base.html" %}

{% block extra_css %}
<style>
    /*  ВАШІ ЗМІННІ ТУТ  */
    :root {
        --primary-color: #007bff;
        --primary-color-dark: #0056b3;
        --secondary-color: #6c757d;
        --light-bg: #f8f9fa;
        --border-color: #ddd;
        --text-color: #212529;
        --heading-color: #333;
        --font-family-base: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        --font-family-headings: 'Arial', sans-serif;
        --font-size-base: 1rem;
        --font-size-h1: 2.5rem;
        --font-size-h2: 2rem;
        --font-size-h3: 1.5rem;
        --spacing-unit: 1rem;
        --spacing-sm: 0.5rem;
        --spacing-md: 1rem;
        --spacing-lg: 2rem;
        --shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);
        --border-radius: 0.375rem;
    }

    /*  ЗАГАЛЬНІ СТИЛІ (card, btn, etc.) */
    .btn {
        display: inline-block;
        padding: 0.5rem 1rem;
        font-size: var(--font-size-base);
        font-weight: bold;
        text-decoration: none;
        color: #fff;
        background-color: var(--primary-color);
        border: none;
        border-radius: var(--border-radius);
        transition: background-color 0.3s ease;
        cursor: pointer;
    }

    .btn:hover {
        background-color: var(--primary-color-dark);
    }

    .btn-primary {
        background-color: var(--primary-color);
    }

    .btn-primary:hover {
        background-color: var(--primary-color-dark);
    }

    .card {
        background-color: #fff;
        border: 1px solid var(--border-color);
        border-radius: var(--border-radius);
        box-shadow: var(--shadow);
        margin-bottom: var(--spacing-md);
        transition: transform 0.2s, box-shadow 0.2s;
    }

    .card:hover {
        transform: translateY(-5px);
        box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    }

    .card-body {
        padding: var(--spacing-md);
    }

    .card-title {
        font-size: var(--font-size-h3);
        font-weight: bold;
        margin-bottom: var(--spacing-sm);
        color: var(--heading-color);
    }

    /* Index page specific styles */
    .welcome-section,
    .search-section,
    .contact-section,
    .service-info {
        border: 1px solid rgba(0, 0, 0, 0.1);
        transition: transform 0.2s;
        background-color: #fff;
        border-radius: var(--border-radius);
        box-shadow: var(--shadow);
        margin-bottom: var(--spacing-md);
        padding: var(--spacing-md);
    }

    .contact-section:hover,
    .service-info:hover {
        transform: translateY(-5px);
    }

    .input-group {
        box-shadow: var(--shadow);
        border-radius: var(--border-radius);
        overflow: hidden;
    }

    .form-control:focus {
        box-shadow: none;
        border-color: var(--primary-color);
    }

    .btn-primary {
        padding-left: 1.5rem;
        padding-right: 1.5rem;
    }

    .badge {
        font-size: 1rem;
        font-weight: normal;
        vertical-align: middle;
    }
</style>
{% endblock %}

{% block content %}
<div class="container mt-4">
    <div class="row">
        <!-- Ліва колонка з привітанням та пошуком -->
        <div class="col-lg-8">
            <!-- Блок привітання -->
            <div class="welcome-section">
                <h1 class="h3 mb-3">{{ _('Welcome to AutogroupEU') }}</h1>
                <p class="lead text-muted">
                    {{ _('Your reliable partner in auto parts supply across Europe. Enter the article number to check prices and availability.') }}
                </p>
            </div>

            <!-- Блок пошуку -->
            <div class="search-section">
                <form method="POST" action="{{ url_for('public_search') }}" class="mb-0">
                    <div class="input-group">
                        <input type="text" name="article" class="form-control form-control-lg"
                            placeholder="{{ _('Enter article number...') }}" required>
                        <button type="submit" class="btn btn-primary btn-lg">
                            <i class="bi bi-search me-1"></i>
                            {{ _('Search') }}
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Права колонка з контактною інформацією -->
        <div class="col-lg-4">
            <div class="contact-section">
                <h4 class="mb-3">
                    <i class="bi bi-headset me-2"></i>
                    {{ _('Need Help?') }}
                </h4>
                <p class="text-muted mb-3">
                    {{ _("If you have any questions, don't hesitate to contact us:") }}
                </p>
                <div class="d-flex align-items-center">
                    <i class="bi bi-telephone-fill text-primary me-3 fs-3"></i>
                    <div>
                        <div class="fw-bold fs-5">+421 907 539 325</div>
                        <small class="text-muted">{{ _('Mon-Fri: 9:00 - 19:00') }}</small>
                    </div>
                </div>
            </div>
             <!-- Блок інформації про сервіс -->
            <div class="service-info">
                <h4 class="mb-3">
                    <i class="bi bi-tools me-2"></i>
                    {{ _('Car Service & Programming') }}
                </h4>
                <p class="text-muted mb-3">
                    {{ _('We offer professional car repair and programming services. Contact us for more information.') }}
                </p>
                <a href="#" class="btn btn-outline-primary">
                    {{ _('Learn More') }}
                </a>
            </div>
        </div>
    </div>

    <!-- New Products Section -->
    <div class="row mt-4">
        <div class="col-12">
            <h2 class="mb-4">{{ _('Available Products') }} 
                <span class="badge bg-primary">{{ total_items }}</span>
            </h2>
        </div>
    </div>

    <!-- Products Grid -->
    <div class="row row-cols-1 row-cols-md-5 g-4">
        {% for product in products %}
        <div class="col">
            <div class="card h-100">
                <!-- Product Image -->
                {% if product.image_url %}
                <img src="{{ product.image_url }}" class="card-img-top" 
                     alt="{{ product.name or product.article }}"
                     style="height: 200px; object-fit: contain; padding: 1rem;">
                {% else %}
                <div class="card-img-top bg-light d-flex align-items-center justify-content-center" 
                     style="height: 200px;">
                    <i class="bi bi-image text-muted" style="font-size: 2rem;"></i>
                </div>
                {% endif %}

                <!-- Product Info -->
                <div class="card-body">
                    <h5 class="card-title">{{ product.name or product.article }}</h5>
                    <p class="card-text small">
                        <strong>{{ _('Brand') }}:</strong> {{ product.brand_name }}<br>
                        <strong>{{ _('Article') }}:</strong> {{ product.article }}<br>
                        <strong>{{ _('Price') }}:</strong> {{ "%.2f"|format(product.price) }} EUR
                    </p>
                    {% if product.description %}
                    <p class="card-text small text-muted">
                        {{ product.description[:100] }}{% if product.description|length > 100 %}...{% endif %}
                    </p>
                    {% endif %}
                </div>

                <!-- Product Actions -->
                <div class="card-footer bg-transparent border-top-0">
                    <a href="{{ url_for('product_details', article=product.article) }}" 
                       class="btn btn-primary btn-sm w-100">{{ _('Details') }}</a>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>

    <!-- Show More Button -->
    {% if has_more %}
    <div class="text-center mt-4 mb-4">
        <a href="{{ url_for('index', page=(page or 1)|int + 1) }}" 
           class="btn btn-outline-primary">{{ _('Show More') }}</a>
    </div>
    {% endif %}
</div>
{% endblock %}